function updateLoginLinks(){if(checkLoginStatus()){var n=JSON.parse(getSession("loggedinuser")).Username;$("#waLoginLink").text("Welcome "+n);$("#logoutLink").show();$(".createAdLink").show()}else $("#waLoginLink").text("Log in"),$(".createAdLink").hide(),$("#logoutLink").hide()}function login(n,t){var r=userLogin(n,t),u,i;r.Error?$("#loginError").text("There was an error logging in.  Please ensure that your user name and password are spelled correctly"):(u=$("#loginCharm").data("charm"),u.element.data("opened")===!0&&u.close(),setSession("loggedinuser",JSON.stringify(r)),i=artistAffiliations(r.UserID),i&&i.length>0&&getSession("activeartist")==null&&setSession("activeartist",JSON.stringify(i[0])));updateLoginLinks()}function loadSearchAdTypes(){var i=wantAdTypesLoad(),n,t;return document.getElementById("adTypeContainer").innerHTML="",n=document.createElement("select"),n.id="adTypes",t="<option value='0'><\/option>",$.each(i,function(n,i){i.Parent==0&&(t+="<option value='"+i.WantAdTypeID+"'>"+i.Name+"<\/option>")}),n.innerHTML=t,document.getElementById("adTypeContainer").appendChild(n),i}function setColorSchemeSwitch(n){var t,i;n==null&&(n="classic");$("#ColorScheme .slide-switch-label").removeClass("switch-selected");t="css/ads-";$("#ColorScheme .slide-switch-marker").removeClass("slide-switch-marker-current");switch(n){case"hic":$("#ColorScheme .slide-switch-selection").removeClass("slide-switch-right");$("#ColorScheme .slide-switch-selection").removeClass("slide-switch-middle");$("#ColorScheme .slide-switch-selection").addClass("slide-switch-left");$("#ColorScheme .slide-switch-label-left span").addClass("slide-switch-marker-current");t+="hic.css";$("#ColorScheme").data("scheme","hic");break;case"neon":$("#ColorScheme .slide-switch-selection").removeClass("slide-switch-left");$("#ColorScheme .slide-switch-selection").removeClass("slide-switch-right");$("#ColorScheme .slide-switch-selection").addClass("slide-switch-middle");$("#ColorScheme .slide-switch-label-left").addClass("switch-selected");$("#ColorScheme .slide-switch-label-middle span").addClass("slide-switch-marker-current");t+="neon.css";$("#ColorScheme").data("scheme","neon");break;case"classic":$("#ColorScheme .slide-switch-selection").removeClass("slide-switch-middle");$("#ColorScheme .slide-switch-selection").removeClass("slide-switch-left");$("#ColorScheme .slide-switch-selection").addClass("slide-switch-right");$("#ColorScheme .slide-switch-label-left").addClass("switch-selected");$("#ColorScheme .slide-switch-label-middle").addClass("switch-selected");$("#ColorScheme .slide-switch-label-right span").addClass("slide-switch-marker-current");t+="classic.css";$("#ColorScheme").data("scheme","classic")}return $('link[id="gmStyle"]').attr("href",t),i=$(".panelContainer"),$(i).each(function(n,i){var r=i.contentDocument?i.contentDocument:i.contentWindow.document;r.getElementById("gmStyle")&&(r.getElementById("gmStyle").href=t)}),getSession("loggedinuser")&&setSession("colorscheme",n),t}function loadContent(){var n;$("#sideboardAds")[0]&&(n=document.createElement("img"),n.src="Media/AdImages/300x250.gif",document.getElementById("sideboardAds").innerHTML="",document.getElementById("sideboardAds").appendChild(n));$("#leftAds")[0]&&(n=document.createElement("img"),n.src="Media/AdImages/300x250.gif",document.getElementById("leftAds").innerHTML="",document.getElementById("leftAds").appendChild(n));$("#navAds")[0]&&(n=document.createElement("img"),n.src="Media/AdImages/160x600.gif",document.getElementById("navAds").innerHTML="",document.getElementById("navAds").appendChild(n));$("#navPanelAds")[0]&&(n=document.createElement("img"),n.src="Media/AdImages/160x600.gif",document.getElementById("navPanelAds").innerHTML="",document.getElementById("navPanelAds").appendChild(n));$("#midBannerAd")[0]&&(n=document.createElement("img"),n.src="Media/AdImages/728x90.jpg",document.getElementById("midBannerAd").innerHTML="",document.getElementById("midBannerAd").appendChild(n));$("#leaderboard")[0]&&(n=document.createElement("img"),n.src="Media/AdImages/728x90.png",document.getElementById("leaderboard").innerHTML="",document.getElementById("leaderboard").appendChild(n))}function assembleAdListing(n,t,i){var r="<table class='adTable' data-adid='"+i.AdID+"'>",f=getMainImage(i),u=i.DateCreated,e=u.lastIndexOf(":");return u=u.substring(0,e),r+="<tr><td><div class='adListImgPanel'><img class='adListImage' src='"+f+"' alt='"+i.Title+"'/><\/div><\/td>",r+="<td><table style='width:100%;border-collapse:collapse'><tr><td class='adPrice'>$"+i.Price.toFixed(2)+"<\/td><\/tr>",r+="<tr><td><a class='adLink' href='#' data-adid='"+i.AdID+"' title='"+i.Title+"'><b>"+i.Title+"<\/b><span class='mif-go'><\/span><\/a><\/td><\/tr>",r+="<tr><td><a class='adLink' href='#' data-adid='"+i.AdID+"' title='"+i.Title+"'>"+i.Location+"<span class='mif-go'><\/span><\/a> | "+u+"<\/td><\/tr>",r+="<tr><td>"+i.Text.substring(0,127)+"...<\/td>",r+"<\/tr><\/table><\/td><\/tr><\/table>"}function loadNavMenu(){for(var o,e,t=wantAdTypesLoad(),i="",r="",u="",f="",n=0;n<t.length;n++)(o="",t[n].Parent<0)||(e=!1,t[n].Parent>0?m=" class='adTypeChild' ":(m=" class='adTypeParent' ",e=!0),t[n].Parent==6||t[n].Parent==7||t[n].Parent==5||t[n].WantAdTypeID==5||t[n].WantAdTypeID==6||t[n].WantAdTypeID==7||t[n].WantAdTypeID==53||t[n].Parent==4||t[n].WantAdTypeID==4?(r+="<a href='#' data-dir='1' data-adtype='"+t[n].WantAdTypeID+"'"+m+">"+t[n].Name+"<\/a>",f+="<a href='#' data-dir='2' data-adtype='"+t[n].WantAdTypeID+" '"+m+">"+t[n].Name+"<\/a>"):(i+="<a href='#' data-dir='1' data-adtype='"+t[n].WantAdTypeID+"'"+m+">"+t[n].Name+"<\/a>",u+="<a href='#' data-dir='2' data-adtype='"+t[n].WantAdTypeID+" '"+m+">"+t[n].Name+"<\/a>"));$("#wantedLeft").append(i);$("#wantedRight").append(r);$("#availableLeft").append(u);$("#availableRight").append(f)}function loadRecent(){for(var r,t=wantAdsSearch("",1e3),i="",n=0;n<t.length;n++)r=getMainImage(t[n]),i+="<a href='#' class='adLink recentAdLink' data-adid='"+t[n].AdID+"'><img src='"+r+"' alt='"+t[n].Title+"'><br/>"+t[n].Title+"<\/a>";$("#recentAds").append(i)}function getMainImage(n){var t=[],i,r="",u="",f;return n.Media&&n.Media.length>0&&(t=jlinq.from(n.Media).contains("Type",1).or(2).or(3).or(4).select()),t.length>0&&(t=jlinq.from(t).contains("IsMain",!0).select()),t&&t.length>0&&(i=t[0]),i?(u=i.Type<5?"uploads/adlist/":"uploads/adlist/",f=jlinq.from(mediaTypes).contains("MediaTypeID",Number(i.Type)).select()[0].Extension,r=u+i.WantAdMediaDiskID+".png"):r="Media/WantAdImages/NoImage.png",r}var table,mediaTypes=[],scheme=getSession("colorscheme");scheme=="hic"?$('link[id="gmStyle"]').attr("href","css/ads-hic.css"):scheme=="classic"?$('link[id="gmStyle"]').attr("href","css/ads-classic.css"):scheme=="neon"?$('link[id="gmStyle"]').attr("href","css/ads-neon.css"):($('link[id="gmStyle"]').attr("href","css/ads-neon.css"),setSession("colorscheme","neon"));$(document).ready(function(){var t,n;setColorSchemeSwitch(scheme);updateLoginLinks();scheme=getSession("colorscheme");scheme=="highcontrast"&&$("#hic").prop("checked",!0);scheme=="classic"&&$("#classic").prop("checked",!0);scheme=="neon"&&$("#neon").prop("checked",!0);mediaTypes=allowedMediaTypes();document.getElementById("navTable")&&loadNavMenu();document.getElementById("recentAds")&&loadRecent();$(document).on("click",".adLink",function(){window.location.href="ad.html?id="+$(this).data("adid")});checkLoginStatus()?$("#createAdLink").show():$("#createAdLink").hide();$("#Login").click(function(){login($("#Username").val(),$("#Password").val())});$(".createAdLink").click(function(){var n=$("#editorCharm").data("charm");n.element.data("opened")===!0?n.close():n.open()});$(document).on("click",".reportLink",function(){var n=$("#reportAdCharm").data("charm");n.element.data("opened")===!0?n.close():n.open()});$(document).on("click","CloseReportPanel",function(){var n=$("#reportAdCharm").data("charm");n.element.data("opened")===!0?n.close():n.open()});$("#CloseLoginPanel").click(function(){var n=$("#loginCharm").data("charm");n.element.data("opened")===!0&&n.close()});$("#waLoginLink").click(function(){if(!(getUserID()>0)){var n=$("#loginCharm").data("charm");n.element.data("opened")===!0?n.close():n.open()}});$("#logoutLink").click(function(){removeSession("loggedinuser");updateLoginLinks()});$("#colorScheme").on("click",function(){this.checked?setSession("colorscheme","highcontrast"):setSession("colorscheme","classic");parent.location.reload()});$(document).on("click","#search",function(){var n=$("#adTypes").val();typeof n=="undefined"&&(n="");window.location.href="ads.html?st="+$("#searchText").val()+"&at="+n});$(document).on("click",".wantAdNavLink",function(){window.location.href="ads.html?st="+$(this).data("dir")+"&at="+$(this).data("adtype")});$(document).on("click",".adTable",function(){window.location.href="ad.html?id="+$(this).data("adid")});$(document).on("click",".adTypeChild",function(){window.location.href="ads.html?st="+$(this).data("dir")+"&at="+$(this).data("adtype")});$(document).on("click",".adTypeParent",function(){window.location.href="ads.html?st="+$(this).data("dir")+"&at="+$(this).data("adtype")});$("#ColorScheme input").on("click",function(n){n.preventDefault();var t=$(this).val();setColorSchemeSwitch(t)});for(t=$("link[rel='import'"),n=0;n<t.length;n++)loadContent(t[n].id,t[n]);loadContent();loadSearchAdTypes()});
/*
//# sourceMappingURL=WantAds.min.js.map
*/