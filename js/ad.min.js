function setMainImage(n,t,i){$("#mainImage").attr("src","uploads/adlist/"+i+".png");$("#mainImage").data("id",n);$("#mainImage").data("ext",t);$("#mainImage").data("diskid",i)}function showCaptcha(){$("#captchaAnswer").val("");var n=Math.floor(Math.random()*10+1),t=Math.floor(Math.random()*10+1),i=Math.floor(Math.random()*3+1);i>2?(captchaAnswer=n*t,$("#captchaText").text("Multiply "+n+" and "+t)):i>1?(captchaAnswer=Math.max(n,t)-Math.min(n,t),$("#captchaText").text("Subtract "+Math.min(n,t)+" from "+Math.max(n,t))):(captchaAnswer=n+t,$("#captchaText").text("Add "+n+" and "+t));showCaptcha2()}function showCaptcha2(){$("#captchaAnswer2").val("");var n=Math.floor(Math.random()*20+1),t=Math.floor(Math.random()*20+1),i=Math.floor(Math.random()*3+1);i>2?(captchaAnswer2=n*t,$("#captchaText2").text("Multiply "+n+" by "+t)):i>1?(captchaAnswer2=n-t,$("#captchaText2").text("Subtract "+t+" from "+n)):(captchaAnswer2=n+t,$("#captchaText2").text("Add "+n+" to "+t))}var ad,captchaAnswer,captchaAnswer2,lgImgDlg;$(document).ready(function(){var e,a,o,n,u,l,f;showCaptcha();e=allowedMediaTypes();a=getQueryParameters(document.location.search);ad=wantAdLoad(a.id);o="";checkLoginStatus()&&(o=" <a href='#' class='reportLink' data-adid='"+ad.AdID+"'><span class='mif-flag'><\/span> Report this ad<\/a>");$("#adTitle").html(ad.Title+o);$("#reportAdTitle").text(ad.Title);var t=!1,s="thumbnail selected",i="",h="",c="",r=-1,v=0,y=0;for(n=0;n<ad.Media.length;n++){u=e[ad.Media[n].Type-1].Extension;switch(u){case"jpg":case"jpeg":case"png":r==-1&&(r=n);ad.Media[n].IsMain&&!t?(setMainImage(ad.Media[n].WantAdMediaID,u,ad.Media[n].WantAdMediaDiskID),t=!0,s="thumbnail selected"):s="thumbnail";l=ad.Media[n].Name.substring(0,ad.Media[n].Name.lastIndexOf(".")+1)+"png";i+="<div class='thumbnailPanel'><img style='cursor:pointer' title='"+ad.Media[n].Name+"' data-diskid='"+ad.Media[n].WantAdMediaDiskID+"' data-name='"+l+"' class='"+s+"' data-mediatype='"+u+"' data-mediaid='"+ad.Media[n].WantAdMediaID+"' src='uploads/thumbs/"+l+"' alt='"+ad.Media[n].Name+"'/><\/div>";v++;v%4==0&&(i+="<br/>");break;case"wav":case"wave":case"mp3":h+="<a target=_NEW class='audioLink' href='uploads/"+ad.Media[n].WantAdMediaDiskID+"."+u+"'>"+ad.Media[n].Name+"<\/a><br>";break;case"":y++;c+="<iframe class='waVideo' src='https://www.youtube.com/embed/"+ad.Media[n].Url+"' title='"+ad.Media[n].Name+"'><\/iframe><br>"}}i.trim()==""||t||(setMainImage(ad.Media[r].WantAdMediaID,e[ad.Media[r].Type-1].Extension,ad.Media[r].WantAdMediaDiskID),t=!0);$("#otherAds").prop("href","ads.html?uid="+ad.UserID);i.trim()==""?$("#thumbnailPanel").hide():$("#thumbnailPanel").html(i);h.trim()==""?$("#audioPanel").hide():$("#audioPanel").html(h);c.trim()==""?$("#videoPanel").hide():$("#videoPanel").html(c).show();t||$("#mainImagePanel").hide();f=new Date(ad.DateCreated).toString();f=f.substring(0,f.indexOf(":")-2);$("#adText").append(ad.Text.replace(/\n/g,"<br/>"));$("#listDate").text(f);$("#price").text(ad.Price.formatMoney(2,".",","));$("#location").text(ad.Location);$(document).on("click",".thumbnail",function(){setMainImage($(this).data("mediaid"),$(this).data("mediatype"),$(this).data("diskid"));$(".thumbnail").removeClass("selected");$(this).addClass("selected")});$("#captchaSend").click(function(){var n=$("#captchaAnswer").val();captchaAnswer==n?$("#sendMail").prop("disabled",!1):showCaptcha()});$("#captchaSend2").click(function(){var n=$("#captchaAnswer2").val();captchaAnswer2==n?($("#submitAdReport").prop("disabled",!1),$("#captchaPanel2").hide()):showCaptcha()});$("#mainImage").click(function(){var n,t;try{$("#largeImagePanel").dialog("close")}catch(i){}n=document.getElementById("lgImg");n.src="uploads/"+$("#mainImage").data("diskid")+".png";$("#lgImg").attr("src",$(n).attr("src")).load(function(){$(".ui-widget-content").css("width",this.width);$(".ui-widget-content").css("height",this.height)});lgimgdlg=$("#largeImagePanel").dialog({height:window.innerHeight,width:t,autoOpen:!1,modal:!0,resizable:!0,position:{my:"center",at:"center",of:"#body",collision:"none"},show:{effect:"blind",duration:250},hide:{effect:"blind",duration:250},create:function(){}});$(lgimgdlg).dialog("open")});$("#largeImagePanel").click(function(){$("#largeImagePanel").dialog("close")});$("#showPhone").click(function(n){ad.Phone?($(this).text(ad.Phone),$(this).prop("href","tel:"+ad.Phone),n.preventDefault()):$(this).text("n/a")});$("#submitAdReport").click(function(){if($("#reportReason").val().trim()!=""&&$("#reportReason").val().trim().length>20)var n=reportAd(getUserID(),ad.AdID,$("#reportReason").val());else{$("#Message").text("You haven't given your reason for reporting this ad.");return}n>0?$("#Message").text("Thank you.  Your report has been set."):n<0?$("#Message").text("You have already reported this ad."):$("#Message").text("There has been an error while submitting your report.  Please try again in a few minutes. If the problem persists, please contact us. ");showCaptcha2()});$("#CloseReportPanel").click(function(){var n=$("#reportAdCharm").data("charm");n.element.data("opened")===!0?n.close():n.open()})});
/*
//# sourceMappingURL=ad.min.js.map
*/