"use strict";function calcPrice(){var n=0;return $("input[type=radio]:checked").each(function(t,i){n+=+$(i).data("amount")}),n}function populateGenres(n){for(var i=genres(),t=0;t<i.length;t++)n.indexOf(i[t].ID)<0&&$("#Genres").append("<option value='"+i[t].ID+"'>"+i[t].Name+"<\/option>")}function populateMyGenres(){var i,n,t;for($("#MyGenres").find("option").remove(),i=JSON.parse(sessionStorage.getItem("activeartist")),n=i.Genres.split(","),t=0;t<n.length;t++)$("#MyGenres").append("<option value='"+n[t]+"'>"+getGenreName(n[t])+"<\/option>");return n}function getGenreName(n){for(var i=genres(),t=0;t<i.length;t++)if(i[t].ID==n)return i[t].Name;return""}function getArtistList(){var n,t;for(artistList=artistListByUserID(getUserID()),n=0;n<artistList.length;n++)t="<option value='"+artistList[n].ArtistID+"'>"+artistList[n].ArtistName+"<\/option>",$("#Artists").append(t);populateForm()}function populateForm(){var n,t,i;$("#Artists").val()&&(art=artistByID($("#Artists").val()),$("#iRequestURL").text(iRequestLocation+"/"+art.iRequestName),art&&!art.Error)&&art&&(n=!1,art.UserID==getUserID()&&(isAdmin=!0),getUserID()==art.UserID&&art.iRequestMember||(n=!0),getUserID()!=art.UserID&&$("#iRequestPayment").hide(),$("#PremiumMonthPayButton").prop("disabled",art.PremiumMember),$("#PremiumYearPayButton").prop("disabled",art.PremiumMember),$("#iRequestMonthPayButton").prop("disabled",art.iRequestMember),$("#iRequestYearPayButton").prop("disabled",art.iRequestMember),art.iRequestMember&&art.PremiumMember?$("#Checkout").prop("disabled",!0):$("#Checkout").prop("disabled",!1),$("#PublicListing").prop("disabled",getUserID()!=art.UserID),$("#offAirMessage").val(art.OffAirMessage),$("#requestStatus").prop("checked",art.RequestStatus),$("#ShowArtist").prop("checked",art.ShowArtist),$("#ShowArtist").prop("disabled",n),$("#ShowCategories").prop("checked",art.ShowCategories),$("#ShowCategories").prop("disabled",n),$("#ShowMembers").prop("checked",art.ShowMembers),$("#ShowMembers").prop("disabled",n),$("#EnableDownvotes").prop("checked",art.EnableDownvotes),$("#EnableDownvotes").prop("disabled",n),$("#PublicListing").prop("checked",art.IsPublic),$("#maxMessages").val(art.MaxiMessages),$("#maxMessages").prop("disabled",n),$("#maxRequests").val(art.MaxiRequests),$("#maxRequests").prop("disabled",n),$("#ArtistName").val(art.ArtistName),$("#ArtistName").prop("disabled",n),$("#ArtistWebsite").val(art.Website),$("#ArtistWebsite").prop("disabled",n),$("#iRequestName").val(art.iRequestName),t=artistMembers(art.ArtistID),populateMemberList(t),isAdmin?getJoinRequests(art):($("#joinRequests").hide(),$("#SaveArtistProfile").hide()),i=populateMyGenres(),populateGenres(i))}function getJoinRequests(n){var i,r,u,t,f,e;for($("#joinRequests").show(),$("#header").text("Pending Join Requests for "+n.ArtistName),i=joinRequests(n.ArtistID),r="",i.length<1&&(r="<tr><td colspan='3'>No Pending Requests<\/td><\/tr>"),u="",t=0;t<i.length;t++)i[t].Status!=!0&&(u=t%2==0?"even":"odd",f="disabled='true'",e="disabled='true'",i[t].Status===1?e="":i[t].Status===0?f="":e=f="",r+="<tr class='"+u+"'><td>"+i[t].Username+"<\/td><td>"+i[t].FirstName+" "+i[t].LastName+"<\/td>",r+="<td><button "+f+" data-requestid='"+i[t].JoinRequestID+"' class='approve square-button button-small buttonColor'><span class='mif-checkmark'><\/span><\/button>&nbsp;&nbsp;",r+="<button "+e+" data-requestid='"+i[t].JoinRequestID+"' class='deny button-small square-button buttonColor'><span class='mif-cross'><\/span><\/button>&nbsp;&nbsp;",r+="<button data-requestid='"+i[t].JoinRequestID+"' class='remove button-small square-button buttonColor'><span class='mif-bin'><\/span><\/button>&nbsp;",r+="<\/td><\/tr>",r+="<tr class='"+u+"'><td colspan='3'>Message: <input type='text' class='message' data-requestid='"+i[t].JoinRequestID+"'/>&nbsp;",r+="Role: <select multiple style='display:inline' class='artistRole'  data-requestid='"+i[t].JoinRequestID+"'>"+getRoles(i[t].UserID)+"<\/select><\/td>",r+="<\/tr>");$("#reqBdy").html(r)}function getRoles(n){var i=instrumentByUser(n),r,t;if(i){for(r="",t=0;t<i.length;t++)r+="<option value='"+i[t].InstrumentID+"'>"+i[t].InstrumentName+"<\/option>";return r}}function populateMemberList(n,t){if($("#memberList").html(""),n){var i="<table style=width:100%>";$.each(n,function(n,r){i+="<tr><td style='width:25%'>"+r.User.FirstName+"  "+r.User.LastName+"<\/td><td style='width:70%'>"+r.ArtistRole+"<\/td>";i+=art.UserID==getUserID()?"<td style='vertical-align:top'><a href='#' class='removeMember' disabled='"+t+"' title='Remove this member' data-userid='"+r.User.UserID+"' data-artistid='"+r.ArtistID+"'>x<\/a><\/tr>":"<td><\/td><\/tr>"});$("#memberList").html(i)}}var artistList,art,isAdmin=!1,rates;$(document).ready(function(){getArtistList();rates=getRates();$(".payment").show();rates&&($("#GMMonth").text("$"+jlinq.from(rates).equals("Name","GigManMonthlyRate").select()[0].Value),$("#PremiumMonthPayButton").data("amount",jlinq.from(rates).equals("Name","GigManMonthlyRate").select()[0].Value),$("#GMYear").text("$"+jlinq.from(rates).equals("Name","GigManYearlyRate").select()[0].Value),$("#PremiumYearPayButton").data("amount",jlinq.from(rates).equals("Name","GigManYearlyRate").select()[0].Value),$("#IRMonth").text("$"+jlinq.from(rates).equals("Name","iRequestMonthlyRate").select()[0].Value),$("#iRequestMonthPayButton").data("amount",jlinq.from(rates).equals("Name","iRequestMonthlyRate").select()[0].Value),$("#IRYear").text("$"+jlinq.from(rates).equals("Name","iRequestYearlyRate").select()[0].Value),$("#iRequestYearPayButton").data("amount",jlinq.from(rates).equals("Name","iRequestYearlyRate").select()[0].Value));$(document).on("click",".removeMember",function(){var n=$(this).data("artistid"),t=$(this).data("userid");artistMemberDelete(n,t);populateMemberList(artistMembers(art.ArtistID))});$("#SaveArtistProfile").click(function(){art.ShowArtist=$("#ShowArtist").prop("checked");art.ShowCategories=$("#ShowCategories").prop("checked");art.ShowMembers=$("#ShowMembers").prop("checked");art.EnableDownvotes=$("#EnableDownvotes").prop("checked");art.MaxiRequests=$("#maxRequests").val();art.MaxiMessages=$("#maxMessages").val();art.Public=$("#PublicListing").prop("checked");art.iRequestName=$("#iRequestName").val();art.RequestStatus=$("#requestStatus").prop("checked");art.OffAirMessage=$("#offAirMessage").val();art.Genres=$("#MyGenres option").map(function(){return $(this).val()}).get().join();artistSave(art.ArtistID,art.ArtistName,art.Website,art.UserID,art.ShowCategories,art.ShowArtist,art.ShowMembers,art.EnableDownvotes,art.MaxiMessages,art.MaxiRequests,art.Public,art.iRequestName,art.Genres,art.OffAirMessage,art.RequestStatus)});$("#Artists").change(function(){populateForm()});$(document).on("click",".approve",function(){var n,t,i;if($(".error").text(""),n=$(this).data("requestid"),!$(".artistRole[data-requestid='"+n+"']").val()){$(".error").text("Please select an artist role.");return}t=$(".message[data-requestid='"+n+"']").val();i=$(".artistRole[data-requestid='"+n+"']").val();joinRequestProcess(n,1,t,i.join(","));populateMemberList(artistMembers(art.ArtistID));getJoinRequests(art)});$(document).on("click",".deny",function(){var n=$(this).data("requestid"),t=$(".message[data-requestid='"+n+"']").val(),i=$(".artistRole[data-requestid='"+n+"']").val();processJoinRequest(n,0,t,i);populateMemberList(getMembersByArtistID(art.ArtistID));getJoinRequests(art)});$("#Move").click(function(n){var t=$("#Genres option:selected");t.length==0&&n.preventDefault();$("#MyGenres").append($(t).clone());$(t).remove();n.preventDefault()});$("#Remove").click(function(n){var t=$("#MyGenres option:selected");t.length==0&&n.preventDefault();$("#Genres").append($(t).clone());$(t).remove();n.preventDefault()});$("#Checkout").click(function(){var n=0,t=0,i=0,r=0;$("#PremiumMonthPayButton").prop("checked")?(n=1,t=jlinq.from(rates).equals("Name","GigManMonthlyRate").select()[0].Value):$("#PremiumYearPayButton").prop("checked")&&(n=2,t=jlinq.from(rates).equals("Name","GigManYearlyRate").select()[0].Value);$("#iRequestMonthPayButton").prop("checked")?(n=1,t=jlinq.from(rates).equals("Name","iRequestMonthlyRate").select()[0].Value):$("#iRequestYearPayButton").prop("checked")&&(i=2,r=jlinq.from(rates).equals("Name","iRequestYearlyRate").select()[0].Value);makePayment(getUserID(),getActiveArtistID(),n,t,i,r,"All Paid Up")});$(".gm-checkbox.payment").click(function(){var n=calcPrice().toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2});$("#paymentTotal").text(n)})});
/*
//# sourceMappingURL=artistprofile.min.js.map
*/