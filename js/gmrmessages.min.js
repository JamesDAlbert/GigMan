function setupDownloads(){$("#uploadDiv").prop("src","uploader.aspx?ip="+ipAddress+"&skin="+$("#gmrStyle").prop("href")+"&type=1")}function getAttachment(){return attachment}function updateCountdown(){if(jQuery("#messageBody").val()){var n=160-jQuery("#messageBody").val().length;jQuery("#charsLeft").text(n+" characters remaining.")}}function getMessages(){for(var i,t=iMessages(),n=0;n<t.length;n++)i="<option value='"+t[n].ID+"' data-type='"+t[n].Type+"'>"+t[n].Message+"<\/option>",$("#messages").append(i)}function getLeader(){return(val="",$(mbrs).each(function(n,t){if(t.ArtistRole.indexOf("Leader")>-1){val=t.User.UserID;return}}),val!="")?val:art.UserID}function getTarget(){var n="",r,t,i;for($(".select input").each(function(t,i){if($(i).prop("checked")==!0){n+=$(i).data("target")+",";return}}),n=n.replace("leader",getLeader()),n.indexOf("-1")>-1&&(n="-1"),n==""&&(n="-2"),r=n.split(","),t=[],$.each(r,function(n,i){$.inArray(i,t)===-1&&t.push(i)}),n="",i=0;i<t.length;i++)n+=t[i],i<t.length-2&&(n+=",");return n}function fileUploaded(n){attachment=n.value;attachment&&($("#photo").html("<img id='pImg' src='uploads/"+attachment+"' alt='Your photo thumbnail' />"),$("#pImg").animate({width:100}))}var mbrs,art,ipAddress="",attachment="";ipAddress=getClientIP();$(document).ready(function(){var u,t,i,n,r,f,e;if(setupDownloads(),art=sessionStorage.getItem("artist"),art&&(art=JSON.parse(art)),!art.RequestStatus){art.OffAirMessage&&art.OffAirMessage.trim()!=""?$("#message").html(art.OffAirMessage):$("#message").html(art.ArtistName+" is offline right now.  You can try their calendar or announcements pages to see whjen they will be back.");$("#interface").hide();return}for($("#gmStyle").prop("href","css/request-"+getSession("colorscheme")+".css"),u=checkRegistry(art.UserID,"imessages",art.MaxiMessages),u==art.MaxiMessages&&($("#message").html(art.ArtistName+" thanks you for using GigMan Request!<br/>Please note that you can send this artist "+art.MaxiMessages+" messages in a 24 hour period."),$("#interface").hide()),mbrs=artistMembers(art.ArtistID),getMessages(),updateCountdown(),t=1,mbrs.length<1&&(t=0),i="<tr class='row odd'><td class='member select'>&nbsp;All&nbsp;<label class='input-control checkbox'><input type='checkbox' data-target='-1' value='0'><\/input><span class='check'><\/span><\/label> <td class='instrument select' colspan='2'><div>Leader&nbsp;<label class='input-control checkbox'><input type='checkbox' data-target='leader' value='1'><\/input><span class='check'><\/span><\/label>&nbsp;<\/div><\/td><td><\/td><\/tr><tr class='row even'><td colspan='3' style='text-align:center'><span style='opacity:"+t+"'>Or<\/td><\/tr>",n=0;n<mbrs.length;n++)r="",r=n%2?" even ":" odd ",f=mbrs[n].ArtistRole,e=mbrs[n].User.FirstName+" "+mbrs[n].User.LastName,i+="<tr class='row "+r+"'><td class='member'>"+e+"<\/td><td class='instrument'>"+f+"<\/td><td class='select'><label class='input-control checkbox'><input type='checkbox' data-target='"+mbrs[n].User.UserID+"' value='"+(n+2)+"'><\/input><span class='check'><\/span><\/label><\/td><\/tr>";$("#members").html($("#members").html()+i);$(".fileSelect").click(function(){$("input[type=file]").trigger("click")});$("input[type=file]").change(function(){$("input[type=text]").val($(this).val());var n=document.getElementById("uFile").files[0];n&&alert("Name: "+n.name+"\nLast Modified Date :"+n.lastModifiedDate)});$("#upload").click(function(){});$("#submitButton").click(function(){var n;if($("#messageMessage").text(""),n=getTarget(),n=="-2"){$("#messageMessage").text("You haven't selected a recipient for your message!");return}var t=$("#messageBody").val(),i=$("#messages").val(),r=getAttachment(),u=iRequestMessageCreate(n,t,art.ArtistID,r,i,ipAddress);addRegistry(art.UserID,"imessages",1);$("#message").text("Thanks from "+art.ArtistName+" for using GigMan Request!");$("#interface").hide()});jQuery(document).ready(function(n){updateCountdown();n("#messageBody").change(updateCountdown);n("#messageBody").keyup(updateCountdown)})});
/*
//# sourceMappingURL=gmrmessages.min.js.map
*/