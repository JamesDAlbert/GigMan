function disableCalendarLink(){$("#calendarLink").hide()}function disableActiveLinks(){$("#messageLink").hide();$("#requestLink").hide()}function openCharm(n,t){var i=$("#"+n).data("charm");t&&!i.element.data("opened")==!0?i.open():i.element.data("opened")!==!0||t||i.close()}function addRegistry(n,t,i){var f=!1,e=sessionStorage.getItem(t),r=[],u;for(e!=null&&(r=JSON.parse(e)),u=0;u<r.length;u++)if(r[u].Artist==n){r[u].Date<Date.now()-864e5?array.slice(r,u):f=!0;break}for(u=0;u<i;u++)r.push({Date:Date.now(),Artist:n});return r&&r.length>0&&sessionStorage.setItem(t,JSON.stringify(r)),!f}function checkRegistry(n,t){var u=sessionStorage.getItem(t),e=!1,o=!1,f=0,r,i;if(u!=null)for(r=JSON.parse(u),i=0;i<r.length;i++)r[i].Artist==n&&(o=!0,r[i].Date<Date.now()-864e5?e=!0:f++);return f}function foundRequest(n){var i=n,t=!1;return $.each($(".requestContainer"),function(n,r){$(r).hasClass("selectedRequest")||$(r).find(".requestSong").text()==i&&(t=!0)}),t}function selectNext(){$(".requestContainer").removeClass("selectedRequest");$.each($(".requestContainer"),function(n,t){if($(t).find(".requestSong").text().trim()=="")return $(".requestContainer").removeClass("selectedRequest"),$(".requestLabel").removeClass("requestLabelSelected"),$(".request").removeClass("requestSelected"),$(".requestSong").removeClass("requestSongSelected"),$(".songVote").removeClass("songVoteSelected"),$(t).addClass("selectedRequest"),$(t).find(".request").addClass("requestSelected"),$(t).find(".requestSong").addClass("requestSongSelected"),$(t).find(".requestLabel").addClass("requestLabelSelected"),$(t).find(".songVote").addClass("songVoteSelected"),!1})}function loadInterface(){$("#interface").show();$("#contentContainer").hide();$("#tutorialLink").show();$("#interfaceLink").hide();$("#Welcome").show();$("#Title").hide();$("#message").show();document.getElementById("contentContainer").src=""}function loadContent(n){document.getElementById("contentContainer").src=n}$(document).ready(function(){var n=document.location.toString(),u,f,e;n=n.replace("#","");var t=null,i=!1,r=!1;n.indexOf(".html")<0&&(n=decodeURI(n.substring(n.lastIndexOf("/")+1)),$("#calendarLink").prop("title",n+"'s Calendar"),$("#otherCharm").data("charm").open(),loadContent("about.html"),$("#aboutLink").addClass("emphasis"),t=artistByiRequestName(n),t.iRequestMember||(loadContent("notfound.html"),sessionStorage.setItem("band",t.ArtistName),disableActiveLinks()),t.PremiumMember||disableCalendarLink(),(t.UserID==-1||n==""||t.UserID==undefined)&&(t=null,i=r=!0,sessionStorage.setItem("band",n),$("#otherCharm").data("charm").open(),document.getElementById("contentContainer").src="notfound.html",$("#contentContainer").show(),$(".toHide").hide()),t!=null&&(sessionStorage.setItem("artist",JSON.stringify(t)),n.indexOf(".htm")>0&&n.indexOf("/")<0&&(cmd=n.substring(0,n.indexOf(".htm")),document.getElementById("contentContainer").src=""+cmd,$("#contentContainer").show()),t.Website!=""?$(".bandName")[0].innerHTML="<a href='"+t.Website+"' target='_blank'>"+t.ArtistName+"<\/a><span class='headerTitle'>'s<\/span>":$(".bandName").text("<span class='headerTitle'>"+n+"'s<\/span>"),u=songListPublic(t.ArtistID),u.length==0?($("#otherCharm").data("charm").open(),document.getElementById("contentContainer").src="nodata.html",i=!0,$("#requestLink").css("text-decoration","none")):$("#intro").show()));$("#bandName").text(sessionStorage.getItem("band"));$("#aboutLink").click(function(){openCharm("requestCharm",!1);openCharm("messageCharm",!1);loadContent("about.html");$(".contentLink").removeClass("emphasis");$(this).addClass("emphasis");openCharm("otherCharm",!0)});$("#calendarLink").click(function(){openCharm("requestCharm",!1);openCharm("messageCharm",!1);loadContent("reqcalendar.html");$(".contentLink").removeClass("emphasis");$(this).addClass("emphasis");openCharm("otherCharm",!0)});$("#tutorialLink").click(function(){openCharm("requestCharm",!1);openCharm("messageCharm",!1);loadContent("tutorial.html");$(".contentLink").removeClass("emphasis");$(this).addClass("emphasis");openCharm("otherCharm",!0)});$("#requestLink").click(function(){i||(openCharm("otherCharm",!1),openCharm("messageCharm",!1),$(".contentLink").removeClass("emphasis"),$(this).addClass("emphasis"),openCharm("requestCharm",!0),$("#requests").attr("src",function(n,t){return t}))});$("#messageLink").click(function(){r||(openCharm("otherCharm",!1),openCharm("requestCharm",!1),$(".contentLink").removeClass("emphasis"),$(this).addClass("emphasis"),openCharm("messageCharm",!0),$("#iframe").attr("src",function(n,t){return t}))});$("#interfaceLink").click(function(){loadInterface()});$("#continueLink").click(function(){$("#interface").show();$("#flowLinkContainer").hide()});$("#interface").show();$(".requestContainer").click(function(){$(".requestContainer").removeClass("selectedRequest");$(".requestLabel").removeClass("requestLabelSelected");$(".request").removeClass("requestSelected");$(".requestSong").removeClass("requestSongSelected");$(".songVote").removeClass("songVoteSelected");$(this).addClass("selectedRequest");$(this).find(".request").addClass("requestSelected");$(this).find(".requestSong").addClass("requestSongSelected");$(this).find(".requestLabel").addClass("requestLabelSelected");$(this).find(".songVote").addClass("songVoteSelected")});$(document).on("click",".songDownVoteLink",function(){var n=unescape(decodeURI($(this).data("artist"))),t=unescape(decodeURI($(this).data("title")));if(foundRequest(t+"/"+n)){$("#message").text("You can only request a song once.");return}$("#message").text("");$(".selectedRequest .songVote").removeClass("mif-thumbs-up").addClass("mif-thumbs-down");$(".selectedRequest .requestSongSelected").text(t+"/"+n);$(".selectedRequest").data("id",$(this).data("id"));$(".selectedRequest").data("vote",-1);selectNext()});$(document).on("click",".songUpVoteLink",function(){var n=unescape(decodeURI($(this).data("artist"))),t=unescape(decodeURI($(this).data("title")));if(foundRequest(t+"/"+n)){$("#message").text("You can only request a song once.");return}$("#message").text("");$(".selectedRequest .songVote").removeClass("mif-thumbs-down").addClass("mif-thumbs-up");$(".selectedRequest .requestSong").text(t+"/"+n);$(".selectedRequest .requestSong").data("id",$(this).data("id"));$(".selectedRequest").data("id",$(this).data("id"));$(".selectedRequest").data("vote",1);selectNext()});f=$("#interface").css("width");e=$(document).innerWidth();$(".charm").css("margin-top",$(".header").height());$("#themeSwitch").click(function(){alert("!")})});var ret=!1;
/*
//# sourceMappingURL=irequest.min.js.map
*/