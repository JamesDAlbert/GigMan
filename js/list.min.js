"use strict";function getDate(n){return n?n.indexOf("1753")>-1?"n/a":n.substring(0,n.indexOf(" ")):"n/a"}function showCategories(){var n=categories(getActiveArtistID());getSession("csListStyle")=="tile"?tileData(n,"category","Categories ("+n.length+")"):listData(n,"category","Categories ("+n.length+")")}function filterColumn(n,t){$("#SongList").DataTable().column(n).search(t,!0,!1).draw()}function showCategory(n){var r=n,i=n,t;n.indexOf("/")>-1&&(r=n.replace("/","|"),i=n.replace("/"," | "));getSession("cListStyle")=="tile"?(t=getSongList("","",n),t=jlinq.from(t).sort("Name").select(),tileData(t,"song","Category - "+i+" ("+t.length+")")):($("#DataList").hide(),$("#SongTiles").hide(),filterColumn(5,r),$("#SongList").parents("div.dataTables_wrapper").first().show(),$("#SongList").show(),$("#Title").html("Category - "+i+" ("+$("#SongList").dataTable().fnSettings().fnRecordsDisplay()+")"))}function showGenres(){var n=genresByArtistID(getActiveArtistID()),i,t;for(n=jlinq.from(n).sort("Name").select(),i=getMasterSongList(),t=0;t<n.length;t++)n[t].Count=i.filter(function(i){return i.Genre==n[t].ID}).length;n=jlinq.from(n).greater("Count",0).select();getSession("gsListStyle")=="tile"?tileData(n,"genre","Genres ("+n.length+")"):listData(n,"genre","Genres ("+n.length+")")}function showGenre(n){var i=n,t;parseInt(n).toString()==n&&(i=genreNameFromID(n));getSession("gListStyle")=="tile"?(t=getMasterSongList(),t=jLinq.from(t).equals("Genre",genreIDFromName(n)).select(),tileData(t,"song","Genre - "+i+" ("+t.length+")")):($("#SongList").dataTable().fnFilter(i,4,!0,!0),$("#DataList").hide(),$("#SongTiles").hide(),$("#SongList").parents("div.dataTables_wrapper").first().show(),$("#SongList").show(),$("#Title").html("Genre - "+i+" ("+$("#SongList").dataTable().fnSettings().fnRecordsDisplay()+")"))}function showUnplayed(){var n;getSession("oListStyle")=="tile"?(n=getMasterSongList(),n=jLinq.from(n).equals("PlayCount","0").select(),tileData(n,"song","Unplayed Songs ("+n.length+")")):($("#SongList").dataTable().fnFilter("0",1),$("#DataList").hide(),$("#SongTiles").hide(),$("#SongList").parents("div.dataTables_wrapper").first().show(),$("#SongList").show(),$("#Title").html("Unplayed Songs ("+$("#SongList").dataTable().fnSettings().fnRecordsDisplay()+")"))}function showArtists(){var n=songArtists(getActiveArtistID());getSession("asListStyle")=="tile"?tileData(n,"artist","Composers ("+n.length+")"):listData(n,"artist","Composers ("+n.length+")")}function showArtist(n){var t,i;getSession("aListStyle")=="tile"?(n=reverseArticle(n),t=getMasterSongList(),t=jLinq.from(t).contains("Artist",n).select(),tileData(t,"song","Composer - "+n+" ("+t.length+")")):($("#SongList").dataTable().fnFilter(n,null,!0,!0),$("#DataList").hide(),$("#SongTiles").hide(),$("#SongList").parents("div.dataTables_wrapper").first().show(),$("#SongList").show(),i=$("#SongList").dataTable().fnSettings().fnRecordsDisplay(),$("#Title").html("Composer - "+n+" ("+$("#SongList").dataTable().fnSettings().fnRecordsDisplay()+")"))}function showSongs(){var n=getMasterSongList();getSession("songListStyle")=="tile"?tileData(n,"song","Master Song List"):($("#SongList").parents("div.dataTables_wrapper").first().show(),$("#SongList").show(),$("#SongTiles").hide(),$("#DataList").hide());$("#Title").html("Master Song List ("+$("#SongList").dataTable().fnSettings().fnRecordsDisplay()+")")}function showSearchResults(n){for(var f=getMasterSongList(),i=jLinq.from(f).contains("Title",n).or().contains("Lyrics",n).select(),r=jLinq.from(songArtists(getActiveArtistID())).contains("Name",n).select(),u=[],r=jLinq.from(r).sort("Name").select(),t=0;t<r.length;t++)r[t].Type="artist",u.push(r[t]);for(i=jLinq.from(i).sort("Artist","Title").select(),t=0;t<i.length;t++)i[t].Type="song",u.push(i[t]);getSession("sListStyle")=="tile"?tileData(u,"mixed","Search Results - '"+n+"' ("+(i.length+r.length)+")"):listData(u,"mixed","Search Results - '"+n+"' ("+(i.length+r.length)+")")}function listData(n,t,i){var f,s,u,o,r,v,e,c,y;if($("#SongTiles").hide(),$("#SongList").parents("div.dataTables_wrapper").first().hide(),$("#SongList").hide(),$("#DataList").show(),$("#Title").text(i),f=document.getElementById("DataList"),$(f).empty(),!n||n.length<1){s=f.insertRow(0);u=s.insertCell(0);u.innerHTML="<br>There are no songs in the songlist.";return}f.style.width="100%";f.style.margin="10px";f.style.fontSize="larger";f.style.borderCollapse="collapse";o=1;n.length*40>window.innerHeight&&(o=Math.floor((window.innerWidth-40)/40));(o>2||t!="genres")&&(o=2);t=="artist"&&(o=5);var h=0,l=0,u,a=t,s;for(r=0;r<n.length;r++)if(t=="mixed"&&(a=n[r].Type),r%o==0&&(s=f.insertRow(l),h=0,l++),v="listRow",l%2!=0&&(v="altListRow"),s.className=v,e="<a class='"+a+"Link' href='#' ",c=n[r].Name,c==""&&(c="[No Category]"),y="",!n[r].Count||i.indexOf("Search Results")==0||(y=" ("+n[r].Count+")",n[r].Count!=0)){switch(t){case"artist":e+="data-artist='"+encodeURI(escape(n[r].Name))+"'";break;case"category":e+="data-category='"+encodeURI(escape(n[r].Name))+"'";break;case"genre":e+="data-genre='"+encodeURI(escape(n[r].Name))+"'";break;case"mixed":a=="artist"?(c=n[r].Name,e+="data-artist='"+encodeURI(escape(n[r].Name))+"'"):(c=n[r].Title+"&nbsp; / &nbsp;"+n[r].Artist,e+="data-artist='"+encodeURI(escape(n[r].Artist))+"' data-songid='"+n[r].ID+"' data-title='"+encodeURI(escape(n[r].Title))+"'")}e+=">"+c+y+"<\/a>";u=s.insertCell(h);u.style.verticalAlign="middle";u.style.border="1px solid gray";u.style.paddingLeft="10px";u.class="songLink";u.innerHTML=e;h++}while(h<o)u=s.insertCell(h),u.style.verticalAlign="middle",u.style.border="1px solid gray",u.style.paddingLeft="10px",u.class="songLink",h++}function tileData(n,t,i){var o="",c=document.createElement("h3"),b=document.getElementById("SongTiles"),l,r,h,g,u,nt,tt,p,w,ut;n=t=="mixed"?jlinq.from(n).sort("Title","Name").select():jlinq.from(n).sort("Title","Name").select();b.innerHTML="";$("#SongTiles").show();$("#SongList").parents("div.dataTables_wrapper").first().hide();$("#SongList").hide();$("#DataList").hide();$("#Title").text(i);l=document.createElement("div");l.className="tile-group";l.style.margin="10px";l.style.padding="0";var k="t-nn",s,f="[",v=!1,it=!1,e=t,a="evenSet",d=-1,rt=getSession("colorscheme")=="highcontrast",y=!1;for(r=0;r<n.length;r++){if(t=="mixed"&&(e=n[r].Type,n[r].Type!=o&&n[r].Type=="artist"&&(o=n[r].Type,c=document.createElement("h3"),c.innerHTML=o[0].toUpperCase()+o.substring(1),b.appendChild(c))),(e=="song"&&n[r].Title[0]!=f||e!="song"&&n[r].Name[0]!=f)&&(f=e=="song"?n[r].Title[0]:n[r].Name[0],v=!0),y&&r%4==0&&(y=!1),v&&(isNaN(f)||!isNaN(f)&&!it)&&!y){if(v){if(isNaN(f)||(it=!0),h=document.createElement("span"),h.className="charmLabelBold",isNaN(f))if(f)h.innerHTML=f+"<br/>",k="t-"+f.toLowerCase();else continue;else h.innerHTML="1..9 <br/>",k="t-nn";t=="genre"&&(h.innerHTML="");b.appendChild(h);d++;t=="mixed"&&n[r].Type!=o&&n[r].Type=="song"&&(o=n[r].Type,c=document.createElement("h3"),c.innerHTML="<br/><br/><br/>"+o[0].toUpperCase()+o.substring(1),s.appendChild(c))}s=document.createElement("div");s.className="tile-container";$(s).css({position:"relative"});v&&s.appendChild(h);l.appendChild(s);v=!1;y=t=="genre";a=a=="evenSet"?"oddSet":"evenSet"}if(y&&(a=a=="evenSet"?"oddSet":"evenSet"),g=document.createElement("div"),g.className="tile tile-small-y gm-bg fg-white myTile "+k,u=document.createElement("div"),nt="",d>=allColors.length&&(d=0),nt=rt?a=="evenSet"?"black":"white":calculateForegroundColor(allColors[d]),tt="",rt&&(tt=""),p=0,w="",e=="genre"||e=="category"){if($(u).attr("data-"+t,encodeURI(escape(n[r].Name))),w="<span class='tileTitle'>"+n[r].Name+"<\/span>",p="<span class='tileTitle'>"+n[r].Count+"<\/span>",n[r].Count==0)continue}else if(e=="song")$(u).attr("data-title",encodeURI(escape(n[r].Title))),$(u).attr("data-artist",encodeURI(escape(n[r].Artist))),$(u).attr("data-songid",n[r].ID),ut=n[r].LastPlayed.substring(0,n[r].LastPlayed.indexOf("T")),w="<span class='tileTitle'>"+n[r].Title+"<\/span>"+("<br/><a class='artistLink' style='font-style:italic;margin-top:5px;font-size:smaller' data-artist='"+escape(encodeURI(n[r].Artist))+"'>"+n[r].Artist+"<\/a>");else if(e=="artist"&&($(u).attr("data-artist",encodeURI(escape(n[r].Name))),w="<span class='tileTitle'>"+n[r].Name+"<\/span>",p="<span class='tileTitle'>"+n[r].ID+"<\/span>",n[r].Count==0))continue;u.className="tile-content myTile "+e+"Tile "+a+" "+k;u.innerHTML=w+" ";tt!=""&&$(u).attr("style",tt);p!=null&&t!="song"&&(u.innerHTML+="("+p+")");e=="songx"&&(u.innerHTML+="<div style='clear:both'><\/div><div style='position:absolute; bottom:0;left:0;width:100%;padding:3px;'><a style='float:left;' class='songEditLink' data-songid='"+n[r].ID+"'><span class='mif-pencil' style='color:"+nt+"'><\/span><\/a>&nbsp;&nbsp;<a style='float:right;' class='songDeleteLink' data-songid='"+n[r].ID+"'><span class='mif-cross' style='color:"+nt+"'><\/span><\/a><\/div>");g.appendChild(u);s.appendChild(g)}b.appendChild(l)}$(document).ready(function(){var o,f,t,c,s,i,r;checkLoginStatus()||(location.href="default.html");var n=getQueryParameters(document.location.search),u=!1,h="t",e=parseInt(getSession("songListLength"));e>-1&&(u=!0,h="");o=getMasterSongList();t=!getSession("narrowtable");$.fn.DataTable.isDataTable("#SongList")||(f=$("#SongList").dataTable({buttons:[{extend:"print",text:""},{extend:"csvHtml5",text:""},],colVis:{buttonText:"<span class='mif-more-horiz'><\/span>"},aaData:o,bPaginate:u,paging:u,bDestroy:!1,sPaginationType:"simple_numbers",iDisplayLength:e,orderClasses:!1,sDom:'<"toolbar"><"toLeft"f>BCt<"toLeft"f>',bLengthChange:!1,responsive:!0,fixedHeader:{header:!0},offsetTop:43,oLanguage:{sEmptyTable:"There are no songs in the song list.",sSearch:""},aoColumnDefs:[{bSortable:!1,aTargets:0,visible:t,mRender:function(n,t,i){return"<a class='songEditLink' href='#' data-songid='"+i.ID+"' title='Edit song'><span class='mif-pencil'><\/span><\/a>&nbsp;&nbsp;<a class='songDeleteLink' href='#' data-songid='"+i.ID+"' title='Delete song'><span class='mif-cross'><\/span><\/a>&nbsp;&nbsp;<a class='updateCountLink' href='#' data-songid=' "+i.ID+"' title='Update song play count'><span class='mif-plus'><\/span><\/a>"}},{aTargets:1,visible:n.v!="o"&t,mRender:function(n,t,i){var r=getDate(i.LastPlayed);return"<span class='songCount' style='cursor:pointer' title='"+r+"'>"+i.PlayCount+"<\/span>"}},{aTargets:2,sClass:"slTitle",mRender:function(n,t,i){return"<a class='songLink' data-songid='"+i.ID+"'>"+i.Title+"<\/a>"}},{aTargets:3,sClass:"slArtist",mRender:function(n,t,i){return"<a class='artistLink' data-artist='"+escape(encodeURI(reverseArticle(i.Artist)))+"'>"+i.Artist+"<\/a>"}},{aTargets:4,visible:t,mRender:function(n,t,i){return"<a class='genreLink' data-genre='"+escape(encodeURI(i.Genre))+"'>"+genreNameFromID(i.Genre)+"<\/a>"}},{aTargets:5,visible:t,mRender:function(n,t,i){return"<a class='categoryLink' data-category='"+escape(encodeURI(i.Category))+"'>"+i.Category+"<\/a>"}},{aTargets:6,visible:!0,mRender:function(n,t,i){return"<span>"+i.AddedDate+"<\/span>"}},{aTargets:7,visible:!1,mRender:function(n,t,i){return"<span>"+i.PlayCount+"<\/span>"}},]}));$(".orderByDate").prop("title","Order songs by date added.");$(".orderByDate").css({height:"30px",width:"30px"});$(".orderByDate span").css({"margin-top":"-6px","margin-left":"1px"});$("input[type=search]").attr("placeholder","Enter Search term");$(".dataTables_filter input").css("float","right").css("margin-right","5px");$("#SongList").hide();jQuery.isEmptyObject(n)&&(n={v:"song"});c=getSession(n.v+"ListStyle");$(document).on("click",".updateCountLink",function(n){n.preventDefault();var t=songUpdateAccessDate($(this).data("songid").trim());isNaN(t)||$(this).closest("tr").find(".songCount").html(t)});$("#ListType .slide-switch-input").click(function(t){t.preventDefault();var i=$(this).val();setListTypeSwitch(i);setSession(n.v+"ListStyle",i);switch(n.v){case"cs":showCategories();break;case"c":showCategory(n.c);break;case"gs":showGenres();break;case"g":showGenre(n.g);break;case"as":showArtists();break;case"a":showArtist(n.a);break;case"song":showSongs();break;case"o":showUnplayed();break;case"s":showSearchResults(n.a)}});s=getSession(n.v+"ListStyle");setListTypeSwitch(s);switch(n.v){case"cs":showCategories();break;case"c":showCategory(n.c);break;case"gs":showGenres();break;case"g":showGenre(n.g);break;case"as":showArtists();break;case"a":showArtist(n.a);break;case"song":showSongs();break;case"o":showUnplayed();break;case"s":showSearchResults(n.a)}$("#DataList").css("margin-left","0");i=$(".pageHeader").height()-40;$("#DataList").css("margin-top",i+3+"px");r=document.createElement("style");r.type="text/css";r.innerHTML=".listOffset { margin-top: "+i+"px!important; } .tileOffset { margin-top:"+(i+10)+"px!important}";document.getElementsByTagName("head")[0].appendChild(r);$("#SongTiles").addClass("tileOffset");$("#SongList_wrapper").addClass("listOffset");$(".buttons-print").prop("title","Print the songlist.");$(".buttons-csv").prop("title","Export the songlist to a CSV file");$(".buttons-colvis").prop("title","Hide/Show songlist columns.");$(".myTile").css({height:getSession("tileheight"),width:getSession("tilewidth"),"font-size":getSession("tilefontsize")})});
/*
//# sourceMappingURL=list.min.js.map
*/