function setMainImage(n,t,i,r){$("#mainImage").attr("src","uploads/adlist/"+t+".png");$("#mainImage").data("id",n);$("#mainImage").data("diskid",t);$("#mainImage").data("ext",i);$("#mainImage").data("name",r)}function loadMedia(n){var t,f;if(n){$("#uploadPanel").show();var r=!1,o="thumbnail selected",i="",e="",u=-1,s=0,c=0,l=0,e="<table style='width:100%'>",h="";for(t=0;t<n.Media.length;t++){f=mt[n.Media[t].Type-1].Extension;switch(f){case"jpg":case"jpeg":case"png":u==-1&&(u=t);n.Media[t].IsMain&&!r?(setMainImage(n.Media[t].WantAdMediaID,n.Media[t].WantAdMediaDiskID,f,n.Media[t].Name),r=!0,o="thumbnail selected",mainImage=n.Media[t].WantAdMediaID):o="thumbnail";i+="<div class='thumbnailPanel'><img title='"+n.Media[t].Name+"' data-name='"+n.Media[t].Name+"' class='"+o+"' data-mediatype='"+f+"' data-mediaid='"+n.Media[t].WantAdMediaID+"' data-diskid='"+n.Media[t].WantAdMediaDiskID+"' src='uploads/thumbs/"+n.Media[t].WantAdMediaDiskID+".png' alt='"+n.Media[t].Name+"'/>";i+="<a href=# title='Delete Media' class='deleteMediaLink' data-type='"+n.Media[t].Type+"' data-id='"+n.Media[t].WantAdMediaID+"'><\/a>";i+="<\/div>";s++;s%4==0&&(i+="<br/>");break;case"wav":case"wave":case"mp3":c++;e+="<tr><td><a href=# title='Delete Media' class='deleteAudioMediaLink' data-type='"+n.Media[t].Type+"' data-id='"+n.Media[t].WantAdMediaID+"'><\/a><\/td><td><a target=_NEW class='audioLink' href='uploads/"+n.Media[t].WantAdMediaDiskID+"."+f+"'>"+n.Media[t].Name+"<\/a><\/td><td><input id='"+n.Media[t].WantAdMediaID+"_name' type='text' maxchars='50' data-oldname='"+n.Media[t].Name+"' data-id='"+n.Media[t].WantAdMediaID+"' value='"+n.Media[t].Name+"'><\/input><\/td><td><button class='button renameButton' data-id='"+n.Media[t].WantAdMediaID+"'>Rename<\/button><\/td><\/tr>";break;case"":l++;h+="<table class='videoDiv'><tr><td><a href=# title='Delete Media' class='deleteAudioMediaLink' data-type='"+n.Media[t].Type+"' data-id='"+n.Media[t].WantAdMediaID+"'><\/a><\/td><td><iframe class='waeVideo' src='https://www.youtube.com/embed/"+n.Media[t].Url+"' title='"+n.Media[t].Name+"'><\/iframe><\/td><\/tr><tr><td colspan='2'><input id='"+n.Media[t].WantAdMediaID+"_name' type='text'maxchars='50' data-id='"+n.Media[t].WantAdMediaID+"' data-oldname='"+n.Media[t].Name+"' value='"+n.Media[t].Name+"'><\/input> <button class='button' data-id='"+n.Media[t].WantAdMediaID+"'>Rename<\/button><\/table><\/td><\/tr>"}}e+="<\/table>";s>=8&&c>=2&&$("#uploadPanel").hide();i.trim()==""||r||(setMainImage(n.Media[u].WantAdMediaID,mt[n.Media[u].Type-1].Extension),r=!0,mainImage=n.Media[u].WantAdMediaID);i.trim()==""?$("#thumbnailPanel").hide():($("#thumbnailPanel").show(),$("#thumbnailPanel").html(i));e.trim()==""?$("#audioPanel").hide():($("#audioPanel").html(e),$("#audioPanel").show());h.trim()==""?$("#videoPanel").hide():($("#videoPanel").html(h),$("#videoPanel").show());r?$("#mainImagePanel").show():$("#mainImagePanel").hide()}}function loadAd(){ad=wantAdLoad($("#usersAds").val());ad.Direction==1?$("#adDirectionSeek").prop("checked",!0):$("#adDirectionOffer").prop("checked",!0);$("#Title").val(ad.Title);$("#Description").val(ad.Text);$("#Price").val(ad.Price);$("#Location").val(ad.Location);$("#Phone").val(ad.Phone);document.getElementById("adType").value=ad.AdType;loadMedia(ad);$("#uploadFrame").prop("src","GigManMedia.aspx?Action=Upload&WantAdID="+$("#usersAds").val()+"&skin="+getSession("colorscheme"))}function loadAds(){for(var r=document.getElementById("usersAds"),t,i,n=r.options.length-1;n>=0;n--)r.remove(n);for($("StatusMessage").text(""),t=wantAdsLoad(0,0,getUserID()),i="<option selected value='0'><\/option>",n=0;n<t.length;n++)i+="<option value='"+t[n].AdID+"'>"+t[n].Title+"<\/option>";$("#usersAds").append(i)}var mt,mainImage="",ad=null;$(document).ready(function(){var i,r,t,n,u;for(mt=allowedMediaTypes(),$("#StatusMessage").text(""),i="",r=!1,$("#newAd").click(function(){ad=null;$("#adDirectionSeek").prop("checked",!0);$("#Title").val("");$("#Description").val("");$("#Price").val("");$("#Location").val("");$("#Phone").val("");document.getElementById("adType").value=1}),t=wantAdTypesLoad(),n=2;n<t.length;n++)u="",t[n].Parent==0?(r&&(i+="<\/optgroup>"),i+="<optgroup value='"+t[n].WantAdTypeID+"' label='"+t[n].Name+"'>",r=!0):i+="<option value='"+t[n].WantAdTypeID+"'>"+u+t[n].Name+"<\/option>";$("#adType").append(i);$("#Save").click(function(){var n="",i,t;if($("#adType").val()==""&&(n+="Ad Type is required.<br/>"),$("#Location").val().trim()==""&&(n+="Location is required.<br/>"),$("#Title").val().trim()==""&&(n+="Title is required.<br/>"),$("#Price").val().trim()==""&&(n+="Price is required."),n!=""){$("#StatusMessage").css("color","red");$("#StatusMessage").append(n);return}if(i=$("#adDirectionSeek").prop("checked")?1:0,t=0,ad&&(t=ad.AdID),t=wantAdSave($("#adType").val(),"",$("#Location").val(),i,$("#Description").val(),$("#Title").val(),getUserID(),$("#Price").val(),$("#Phone").val(),t),t>0){$("#StatusMessage").css("color","green");$("#StatusMessage").append("Want Ad saved.");loadAds();return}});$("#usersAds").on("change",function(){loadAd()});$(document).on("click",".thumbnail",function(){setMainImage($(this).data("mediaid"),$(this).data("diskid"),$(this).data("mediatype"),$(this).data("name"));mainImage=$(this).data("mediaid");$(".thumbnail").removeClass(".selected");$(this).addClass(".selected");updateMainImage($("#usersAds").val(),mainImage)});$(document).on("click",".deleteMediaLink, .deleteAudioMediaLink",function(){wantAdMediaDelete($(this).data("id"),$(this).data("type"));loadAd()});$("#submitVideo").click(function(){($("#usersAds").val()=="0"||$("#videoKey").val().trim()==""||$("#videoTitle").val().trim()=="")&&$("#StatusMessage").text("Vide Key and Video Title are required, and an ad must be loaded.");var n=submitVideo(parseInt($("#usersAds").val()),$("#videoKey").val(),$("#videoTitle").val());n?n==-1?$("#StatusMessage").text("You have already added that video URL."):(loadAd(),$("#StatusMessage").text("Your video has been added.")):$("#StatusMessage").text("There was an error.  Please try again in a few minutes.  If the problem persists, please contact us.")});$(document).on("click",".renameButton",function(){var n=$(this).data("id"),t=$("[id^="+n+"_name]").val(),i=$("[id^="+n+"_name]").data("oldname");n!=""&&t!=""&&t!=i&&(wantAdMediaRename(n,t),loadAd())});loadAds()});
/*
//# sourceMappingURL=newad.min.js.map
*/