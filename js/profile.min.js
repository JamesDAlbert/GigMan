"use strict";function loadGeographic(n){var t,i;n.Country!="US"&&n.Country!="CA"&&$("#statePanel").hide();var u=countries(),f=states(n.Country),r="<option><\/option>";for(t=0;t<u.length;t++)i="",u[t].Code==n.Country&&(i=" selected "),r+="<option value='"+u[t].Code+"'"+i+">"+u[t].Name+"<\/option>";for($("#country").append(r),r="<option><\/option>",t=0;t<f.length;t++)i="",f[t].Name==n.State&&(i=" selected "),r+="<option value='"+f[t].Name+"'"+i+">"+f[t].Name+"<\/option>";$("#state").append(r);$("#city").val(n.City);$("#postalCode").val(n.PostalCode)}function addError(n){var t=$("#Error").html();t==""?t=n:t+="<br/>"+n;$("#Error").html(t)}function getAllArtists(n){var i=artistsAll(),t,r;for($("#artistList").append("<option value=''><\/option>"),t=0;t<i.length;t++)n&&contains(n,i[t].ArtistName)||(r="<option value='"+i[t].ArtistID+"'>"+i[t].ArtistName+"<\/option>",$("#joinArtistList").append(r))}function contains(n,t){for(var i=0;i<n.length;i++)if(n[i].Artist.ArtistName==t)return!0;return!1}function getArtistAffiliationList(){for(var r,i="",n=artistAffiliations(getUserID()),t=0;t<n.length;t++)i+="<tr><td>"+n[t].Artist.ArtistName+"<\/td><td>"+n[t].Instrument+"<\/td>",r=n[t].AllowMessaging?" checked ":"",i+="<td><input class='msgChk' type='checkbox' data-userartistid='"+n[t].UserArtistID+"'"+r+"/><\/td><\/tr>";return $("#RoleTable tbody").html(i),n}function getPendingJoinRequests(){for(var r,i=joinRequestsByUserID(getUserID()),n="",t=0;t<i.length;t++)i[t].Status!=1&&(n+="<tr><td>"+i[t].ArtistName+"<\/td><td>",n+=i[t].Status==-1?"Pending":i[t].Status==0?"Denied":"Denied",n+="<\/td><\/tr>");r=$("#RoleTable tbody").html();r&&(n=r+n);$("#RoleTable tbody").html(n)}$(document).ready(function(){var usr=JSON.parse(getSession("loggedinuser")),uinst=usr.Instruments.replace(/ /g,""),inst=instrumentList(),opts="",groupstart=!1,i,pad,jDt,aa;for(loadGeographic(usr),i=0;i<inst.length;i++)pad="",inst[i].Parent==0?(groupstart&&(opts+="<\/optgroup>"),opts+="<optgroup value='"+inst[i].InstrumentID+"' label='"+inst[i].Name+"'>",groupstart=!0):opts+="<option value='"+inst[i].InstrumentID+"'>"+pad+inst[i].Name+"<\/option>";$("#Instruments").append(opts);$("#Instruments").val(uinst.split(","));$("#status").text(usr.Active?"Active":"Inactive");jDt=eval("new "+usr.CreationDate.replace("/","").replace("/","").substring(0,usr.CreationDate.indexOf("-")-1)+")");$("#joinDate").text(jDt.getMonth()+1+"/"+jDt.getDate()+"/"+jDt.getFullYear());aa=getArtistAffiliationList();getAllArtists(aa);getPendingJoinRequests();$("#joinArtistList option").length==0&&($("#joinArtistList").prop("disabled",!0),$("#joinRequestSend").prop("disabled",!0));$("#instrumentPanel").accordion();$("#userName").text(usr.Username);$("#Email").val(usr.Email);$("#FirstName").val(usr.FirstName);$("#ArtistRole").val(usr.Role);$("#LastName").val(usr.LastName);$("#joinRequestSend").click(function(){var n=getUserID(),t=$("#joinArtistList").val();joinRequestCreate(n,t)});$("button[type='submit']").click(function(){var t=$("#password").val(),i=$("#password2").val(),n;if(t!=i){addError("The passwords do not match.");return}n="";$("#Instruments :selected").each(function(t,i){n+=$(i).val()+","});n||(n="");n.indexOf(",")>-1&&(n=n.replace(/,([^,]*)$/,"$1"));($("#FirstName").text().trim()==""||$("#LastName").text().trim()=="")&&addError("First Name and Last Name are required.");$("#Email").text().trim()==""&&addError("Email address is required.");$("#country").val()==""&&addError("Country is a required field.");($("#country").val()=="CA"||$("#country").val()=="US"&&$("#state").val()=="")&&addError("State is a required field.");$("#city").val().trim()==""&&addError("City is a required field.");($("#country").val()=="CA"||$("#country").val()=="US"&&$("#postalCode").val()=="")&&addError("Postal Code is a required field.");userUpdate(getUserID(),$("#FirstName").val(),$("#LastName").val(),$("#Email").val(),"",$("#Password").val(),n,$("#country").val(),$("#state").val(),$("#city").val(),$("#postalCode").val()).Error||(usr.FirstName=$("#FirstName").val(),usr.LastName=$("#LastName").val(),usr.Email=$("#Email").val(),usr.Instruments=n,sessionStorage.setItem("loggedinuser",JSON.stringify(usr)))});$(document).on("click",".msgChk",function(){updateUserArtistMessaging($(this).data("userartistid"),$(this).prop("checked"))})});
/*
//# sourceMappingURL=profile.min.js.map
*/