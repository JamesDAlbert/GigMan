"use strict";function nextSetlist(){setLists.length!=1&&(setIdx++,setIdx>maxSetIdx&&(setIdx=0),maxSubsetIdx=setLists[setIdx].Subsets.length-1,subsetIdx=0,showSetnames())}function prevSetlist(){setLists.length!=1&&(setIdx--,setIdx<0&&(setIdx=maxSetIdx),maxSubsetIdx=setLists[setIdx].Subsets.length-1,subsetIdx=0,showSetnames())}function nextSubset(){subsetIdx++;subsetIdx>maxSubsetIdx&&(subsetIdx=0);showSetnames()}function prevSubset(){subsetIdx--;subsetIdx<0&&(subsetIdx=maxSubsetIdx);showSetnames()}function initDataTables(){$("#SongTiles").hide();$("#SongList").parents("div.dataTables_wrapper").first().show();$("#SongList").show();var n=parseInt(getSession("setlistlength")),t="BCtp";n==-1&&(t="BCt");setTbl?($("#SongList").DataTable().clear(),$("#SongList").DataTable().rows.add(songs),$("#SongList").DataTable().draw()):(jQuery("#SongList").dataTable().fnDestroy(),setTbl=$("#SongList").dataTable({buttons:[{text:"",className:"prevSet",action:function(){prevSetlist()}},{text:"",className:"prevSubset",action:function(){prevSubset()}},{text:"",className:"nextSubset",action:function(){nextSubset()}},{text:"",className:"nextSet",action:function(){nextSetlist()}},{extend:"print",text:""},{extend:"csvHtml5",text:""}],colVis:{buttonText:"<span class='mif-more-horiz'><\/span>"},aaData:songs,bPaginate:!0,pagingType:"simple_numbers",orderClasses:!1,bDestroy:!1,bLengthChange:!1,lengthMenu:[[5,10,20,-1]["All"]],pageLength:n,bFilter:!1,bServerSide:!1,sDom:t,aaSorting:[],oLanguage:{sEmptyTable:"No setlists found.",sSearch:""},aoColumnDefs:[{aTargets:0,mRender:function(n,t,i){return"<a class='songLink' data-artist='"+reverseArticle(i.Artist)+"' data-title='"+reverseArticle(i.Title)+"' data-songid='"+i.ID+"'>"+i.Title+"<\/a>"}},{aTargets:1,mRender:function(n,t,i){return"<a class='artistLink' data-artist='"+reverseArticle(i.Artist)+"'>"+i.Artist+"<\/a>"}},{aTargets:2,mRender:function(n,t,i){return"<a class='genreLink' data-genre='"+i.Genre+"'>"+genreNameFromID(i.Genre)+"<\/a>"}},{aTargets:3,mRender:function(n,t,i){return"<a class='categoryLink' data-category='"+i.Category+"'>"+i.Category+"<\/a>"}},{aTargets:4,mRender:function(n,t,i){return"<a class='categoryLink' data-category='"+i.Tempo+"'>"+tempoNameFromID(i.Tempo)+"<\/a>"}},]}));$(".ColVis_Button.ColVis_MasterButton").prop("title","Show/hide columns.")}function showTileData(){var e=document.getElementById("SongTiles"),i,n,u,f,t,h;e.innerHTML="";$("#SongTiles").show();$("#SongList").parents("div.dataTables_wrapper").first().hide();$("#SongList").hide();i=document.createElement("div");i.className="tile-group";i.style.margin="10px";i.style.padding="0";var r,c=window.innerWidth/150,o="[",s=!1,l=!1;for(n=0;n<songs.length;n++)n%c==0&&(s&&(isNaN(o)||(l=!0),u=document.createElement("span"),u.className="tileDivider",u.innerHTML=isNaN(o)?o+"<br/>":"1..9 <br/>",e.appendChild(u)),r=document.createElement("div"),r.className="tile-container",s&&r.appendChild(u),i.appendChild(r),s=!1),f=document.createElement("div"),f.className="tile tile-small-y bg-teal fg-white myTile",t=document.createElement("div"),h="",$(t).attr("data-title",encodeURI(escape(songs[n].Title))),$(t).attr("data-artist",encodeURI(escape(songs[n].Artist))),$(t).attr("data-songid",encodeURI(escape(songs[n].ID))),h=songs[n].Title+"<br/><br/><a class='artistLink' style='font-style:italic' data-artist='"+escape(encodeURI(songs[n].Artist))+"'>"+songs[n].Artist+"<\/a>",t.className="tile-content myTile songTile",t.innerHTML=h+" ",songs[n].Count!=null&&(t.innerHTML+="("+songs[n].Count+")"),f.appendChild(t),r.appendChild(f);e.appendChild(i)}function callback(){setSetlistEditor(setLists[setIdx].Set,setLists[setIdx].Subsets[subsetIdx].SubsetName)}function showSetnames(){setLists.length>0&&($("#Setname").text(setLists[setIdx].Set),$("#Subset").text(setLists[setIdx].Subsets[subsetIdx]));getSetData()}function getSetData(){var t,n,i;if(setLists.length>0)for(t=setlist(setLists[setIdx].Set,setLists[setIdx].Subsets[subsetIdx],getActiveArtistID()),maxSubsetIdx=setLists[setIdx].Subsets.length-1,songs=[],n=0;n<t.Songs.length;n++)i=jlinq.from(masterList).equals("ID",t.Songs[n].SongID).select(),songs.push(i[0]);initDataTables()}var setLists=[],setIdx=0,subsetIdx=0,maxSetIdx,maxSubsetIdx,songs,masterList,setTbl;$(document).ready(function(){var n,t,i,r;for(setListTypeSwitch(getSession("setListStyle")),$("#colorScheme").prop("checked",getSession("colorscheme")=="highcontrast"),n=setlists(getActiveArtistID()),maxSetIdx=n.length-1,t=0;t<n.length;t++)i=subsets(n[t],getActiveArtistID()),r={Set:n[t],Subsets:i},setLists.push(r);masterList=getMasterSongList();showSetnames();$(".buttons-print").prop("title","Print the songlist.");$(".buttons-csv").prop("title","Export the songlist to a CSV file");$(".buttons-colvis").prop("title","Hide/Show songlist columns.");$(".nextSet").prop("title","Next Setlist.");$(".prevSet").prop("title","Previous Setlist.");$(".nextSubset").prop("title","Next sub-set.");$(".prevSubset").prop("title","Previous sub-set.")});
/*
//# sourceMappingURL=setlist.min.js.map
*/