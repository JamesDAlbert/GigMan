"use strict";function populateEditor(n){n!=null&&(tsong=n,$("#isPublic").prop("checked",n.Public),$("#SongEditorTitle").val(tsong.Title),$("#SongEditorArtist").val(tsong.Artist),$("#SongEditorCategory").val(tsong.Category),$("#SongEditorSampleURL").val(tsong.Sample),$("#SongEditorLyrics").val(tsong.Lyrics),tsong.Sample!=""&&($("#playLink").attr("href",tsong.Sample),$("#playLink").toggleClass("fg-orange")),$("#SongEditorGenre").val(tsong.Genre),$("#SongEditorKey").val(tsong.Key),$("#SongEditorTempo").val(tsong.Tempo),$("#SongEditorFamiliarity").val(tsong.Familiarity))}function modList(n){for(var t=0;t<n.length;t++)n[t].text=n[t].Name,n[t].id=n[t].ID;return n}function loadList(n,t){for(var r,i=0;i<n.length;i++)r=document.createElement("li"),r.innerHTML="<a data-genre='"+n[i].ID+"'>"+n[i].Name+"<\/a>",t.appendChild(r)}function getParentQueryParameters(){var t=window.parent.location.search.replace("?","").split("&"),i={},n;if(t!="")for(n=0;n<t.length;n++)i[t[n].split("=")[0]]=t[n].split("=")[1];return i}function resizeTextArea(){var n=document.getElementById("textAreaDiv").offsetHeight,t=document.body.clientHeight;document.getElementById("SongEditorLyrics").style.height=t-n-35}var tsong,keyList=["A","Bb","B","C","C#","D","Eb","E","F","F#","G","Ab"];$(document).ready(function(){var i=getMasterSongList(),r=jLinq.from(i).distinct("Title"),u=jLinq.from(i).distinct("Artist"),f=jLinq.from(i).distinct("Category"),n,t,e;for($("#SongEditorLyrics").each(function(){this.style.setProperty("font-face",getSession("lyricFont"),"important")}),$("#SongEditorLyrics").css({wrap:"soft","white-space":"pre","font-size":"16px"}),n=0;n<r.length;n++)t="<option value='"+reverseArticle(r[n])+"'>"+reverseArticle(r[n])+"<\/option>",$("#Titles").append(t);for(n=0;n<u.length;n++)t="<option value='"+reverseArticle(u[n])+"'>"+reverseArticle(u[n])+"<\/option>",$("#Artists").append(t);for(n=0;n<f.length;n++)t="<option value='"+f[n]+"'>"+f[n]+"<\/option>",$("#Categories").append(t);$("#SongEditorGenre option").remove();$.each(genres(),function(n,t){$("#SongEditorGenre").append($("<option><\/option>").text(t.Name).val(t.ID))});$("#SongEditorTempo option").remove();$.each(tempos(),function(n,t){$("#SongEditorTempo").append($("<option><\/option>").text(t.Name).val(t.ID))});$("#SongEditorFamiliarity option").remove();$.each(familiarities(),function(n,t){$("#SongEditorFamiliarity").append($("<option><\/option>").text(t.Name).val(t.ID))});$("#SongEditorKey option").remove();$.each(keyList,function(n,t){$("#SongEditorKey").append($("<option><\/option>").text(t).val(n))});e=getParentQueryParameters(document.location.search);e.id!=null&&(tsong=songByID(e.id,getActiveArtistID()),populateEditor(tsong));$("#ClearEditor").click(function(){$("#SongEditorTitle").val("");$("#SongEditorArtist").val("");$("#SongEditorCategory").val("");$("#SongEditorSampleURL").val("");$("#SongEditorLyrics").val("");$("#SongEditorGenre").val(genres()[0].ID);$("#SongEditorKey").val("0");$("#SongEditorFamiliarity").val(familiarities()[0].ID);$("#SongEditorTempo").val(tempos()[0].ID);$("#SongEditorNotes").val("0");tsong={ID:0}});$("#SongEditorSubmit").click(function(){var t,n,r,i,u;$("#EditorMessage").text("");t=-1;n=getMasterSongList();tsong?(r=$.map(n,function(n,t){if(n.ID==tsong.ID)return t}),t=r[0]):(tsong={},tsong.ID=0);tsong.Title=$("#SongEditorTitle").val();tsong.Artist=$("#SongEditorArtist").val();tsong.Category=$("#SongEditorCategory").val();tsong.Sample=$("#SongEditorSampleURL").val();tsong.Lyrics=$("#SongEditorLyrics").val();tsong.Genre=$("#SongEditorGenre").val();tsong.Key=$("#SongEditorKey").val();tsong.Familiarity=$("#SongEditorFamiliarity").val();tsong.Tempo=$("#SongEditorTempo").val();tsong.Public=$("#isPublic").prop("checked");tsong.Notes=$("#SongEditorNotes").val();tsong.ArtistID=getActiveArtistID();tsong.PlayCount=0;i=songSave(tsong);tsong.Status=1;tsong.ID>0?n[t]=tsong:(tsong.ID=i,tsong.LastPlayed="1970-01-01",n.push(tsong));setLocal("songlist",JSON.stringify(n));setLocal("dirty",!0);i?($("#EditorMessage").css("color","lime"),$("#EditorMessage").text("Song saved.")):($("#EditorMessage").css("color:red"),$("#EditorMessage").text("There was an error saving your song to the database. It has been saved locally."));$("#SongList").length>0&&$("#SongList",window.parent.document).length>0&&(u=$("#SongList",window.parent.document).dataTable(),u&&parent.location.reload())})});
/*
//# sourceMappingURL=songEditor.min.js.map
*/